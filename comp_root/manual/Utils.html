<HTML>
<HEAD>
<TITLE>ePortal::Utils - useful global wide functions.</TITLE>
<LINK REV="made" HREF="mailto:rusakov_sa@users.sourceforge.net">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#methods">METHODS</A></LI>
	<UL>

		<LI><A HREF="#logline%28loglevel%2Cstring%2C...%29"><CODE>logline(loglevel,string,...)</CODE></A></LI>
		<LI><A HREF="#pick_lang%28hash%29"><CODE>pick_lang(hash)</CODE></A></LI>
		<LI><A HREF="#href%28%20uri%2C%20key%20%3D%3E%20value%2C%20...%29">href( uri, key =&gt; value, ...)</A></LI>
		<LI><A HREF="#plink%28text%2C%20parameters%2C%20...%29">plink(text, parameters, ...)</A></LI>
		<LI><A HREF="#empty_table%28%20param%20%3D%3E%20value%20%29">empty_table( param =&gt; value )</A></LI>
		<LI><A HREF="#empty_tr%28%20param%20%3D%3E%20value%20%29">empty_tr( param =&gt; value )</A></LI>
		<LI><A HREF="#empty_td%28%20param%20%3D%3E%20value%20%29">empty_td( param =&gt; value )</A></LI>
		<LI><A HREF="#img%28%20param%20%3D%3E%20value%20%29">img( param =&gt; value )</A></LI>
		<LI><A HREF="#filter_html%28%24content%29"><CODE>filter_html($content)</CODE></A></LI>
	</UL>

	<LI><A HREF="#author">AUTHOR</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P>ePortal::Utils - useful global wide functions.</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<P>Some functions are very useful anywhere. They are collected here.</P>
<P>
<HR>
<H1><A NAME="methods">METHODS</A></H1>
<P>
<H2><A NAME="logline%28loglevel%2Cstring%2C...%29"><CODE>logline(loglevel,string,...)</CODE></A></H2>
<P>Record the string in error log. There are a number of loglevels:</P>
<UL>
<LI><STRONG><A NAME="item_emerg">emerg</A></STRONG><BR>

Emergencies - system is unusable: Object creation errors.
<P></P>
<LI><STRONG><A NAME="item_alert">alert</A></STRONG><BR>

Action must be taken immediately.
<P></P>
<LI><STRONG><A NAME="item_crit">crit</A></STRONG><BR>

Critical Conditions.
<P></P>
<LI><STRONG><A NAME="item_error">error</A></STRONG><BR>

Error conditions.
<P></P>
<LI><STRONG><A NAME="item_warn">warn</A></STRONG><BR>

Warning conditions.
<P></P>
<LI><STRONG><A NAME="item_notice">notice</A></STRONG><BR>

Normal but significant condition.
<P></P>
<LI><STRONG><A NAME="item_info">info</A></STRONG><BR>

Informational: Redirects.
<P></P>
<LI><STRONG><A NAME="item_debug">debug</A></STRONG><BR>

Debug-level messages: ACL checking
<P></P></UL>
<P>
<H2><A NAME="pick_lang%28hash%29"><CODE>pick_lang(hash)</CODE></A></H2>
<PRE>
 pick_lang( eng =&gt; &quot;text in english&quot;,
            rus =&gt; &quot;text in russian&quot;);</PRE>
<P>Chooses and returns a text for a current ePortal language.</P>
<P>
<H2><A NAME="href%28%20uri%2C%20key%20%3D%3E%20value%2C%20...%29">href( uri, key =&gt; value, ...)</A></H2>
<P>Constructs full URL with optional parameters.</P>
<P><EM>uri</EM> is filename or URI to some file.</P>
<P><EM>key-value</EM> pairs may be repeated. <EM>value</EM> may be array ref.</P>
<P>Returns a string like <EM>uri?key=value&amp;key=value</EM></P>
<P>
<H2><A NAME="plink%28text%2C%20parameters%2C%20...%29">plink(text, parameters, ...)</A></H2>
<P>Constructs HTML code to make anchor like [link] (text in square brackets)</P>
<P><EM>text</EM> is text to show as link.</P>
<P>Other <EM>parameters</EM> are passed directly to CGI::a() function. Most used
are:</P>
<PRE>
 -href =&gt; '<A HREF="http://server/file.htm">http://server/file.htm</A>'
 -href =&gt; href('file.htm', param1 =&gt; value1)
 -class =&gt; &quot;someclass&quot;
 -target =&gt; &quot;_top&quot;
 -title =&gt; &quot;floating title&quot;</PRE>
<P>
<H2><A NAME="empty_table%28%20param%20%3D%3E%20value%20%29">empty_table( param =&gt; value )</A></H2>
<P>Constructs HTML code to create empty table 100% width. A background of the
table is filled with 1 pixel in size transparent picture. Parameters passed
as hash are:</P>
<P><EM>height</EM> table height in pixels</P>
<P><EM>bgcolor</EM> HTML compatible color value</P>
<P><EM>black</EM> adjust background picture and color values to make the table
completly black</P>
<P>Returns HTML string in scalar of array context. If used in void contxet
then $m-&gt;<CODE>out()</CODE> is used to output the string immediately .</P>
<P>
<H2><A NAME="empty_tr%28%20param%20%3D%3E%20value%20%29">empty_tr( param =&gt; value )</A></H2>
<P>Contructs HTML code for empty row of table. Parameters passed as hash are:</P>
<P><EM>height</EM> height in pixels</P>
<P><EM>colspan</EM> make a cell as colspan. Used in multicolumn tables</P>
<P><EM>bgcolor</EM> HTML compatible color value</P>
<P><EM>black</EM> adjust all parameters to make the row completely black</P>
<P>Returns HTML string in scalar of array context. If used in void contxet
then $m-&gt;<CODE>out()</CODE> is used to output the string immediately .</P>
<P>
<H2><A NAME="empty_td%28%20param%20%3D%3E%20value%20%29">empty_td( param =&gt; value )</A></H2>
<P>Contructs HTML code for empty cell of table. Parameters passed as hash are:</P>
<P><EM>height</EM> height in pixels</P>
<P><EM>width</EM> width in pixels</P>
<P><EM>colspan</EM> make a cell as coluln span.</P>
<P><EM>bgcolor</EM> HTML compatible color value</P>
<P><EM>black</EM> adjust all parameters to make the row completely black</P>
<P>Returns HTML string in scalar of array context. If used in void contxet
then $m-&gt;<CODE>out()</CODE> is used to output the string immediately .</P>
<P>
<H2><A NAME="img%28%20param%20%3D%3E%20value%20%29">img( param =&gt; value )</A></H2>
<P>Contructs HTML code for image tag. Parameters passed as hash are:</P>
<P><EM>src</EM> required. URI to image.</P>
<P><EM>width</EM>, <EM>height</EM> if not passed then Image::Size is used for calculation
at runtime. These attributes are calculated only once for each apache
child. They are cached for speed.</P>
<P><EM>alt</EM> alternative text for the image</P>
<P><EM>id</EM> ID of the image</P>
<P>Some parameters are used to construct Link from the image:</P>
<P><EM>href</EM>, <EM>target</EM>, <EM>title</EM>, <EM>onClick</EM> - they are self-expanatory, passed
to CGI::a() function.</P>
<P>Returns HTML string in scalar of array context. If used in void contxet
then $m-&gt;<CODE>out()</CODE> is used to output the string immediately .</P>
<P>
<H2><A NAME="filter_html%28%24content%29"><CODE>filter_html($content)</CODE></A></H2>
<P>Filters a content to cut some HTML tags like &lt;HTML&gt;</P>
<P>Accept as parameter:</P>
<P><STRONG>any text</STRONG> - filters this text</P>
<P><STRONG>/path/filename</STRONG> - reads this file and filters it</P>
<P><STRONG>$m</STRONG> - calls <CODE>fetch_next()</CODE> and filters the output</P>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Sergey Rusakov, &lt;<A HREF="mailto:rusakov_sa@users.sourceforge.net">rusakov_sa@users.sourceforge.net</A>&gt;</P>

</BODY>

</HTML>
