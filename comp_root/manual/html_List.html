<HTML>
<HEAD>
<TITLE>ePortal::HTML::List - List of objects support.</TITLE>
<LINK REV="made" HREF="mailto:rusakov_sa@users.sourceforge.net">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#methods">METHODS</A></LI>
	<UL>

		<LI><A HREF="#new%28%29"><CODE>new()</CODE></A></LI>
		<LI><A HREF="#initialize%28%29"><CODE>initialize()</CODE></A></LI>
		<LI><A HREF="#handle_request%28%29"><CODE>handle_request()</CODE></A></LI>
		<LI><A HREF="#columns%28%29"><CODE>columns()</CODE></A></LI>
		<LI><A HREF="#columns_count%28%29"><CODE>columns_count()</CODE></A></LI>
		<LI><A HREF="#add_column%28%29"><CODE>add_column()</CODE></A></LI>
		<LI><A HREF="#add_column_image%28%29"><CODE>add_column_image()</CODE></A></LI>
		<LI><A HREF="#add_column_image%28%29"><CODE>add_column_image()</CODE></A></LI>
		<LI><A HREF="#add_column_enabled%28%29"><CODE>add_column_enabled()</CODE></A></LI>
		<LI><A HREF="#add_column_image%28%29"><CODE>add_column_image()</CODE></A></LI>
		<LI><A HREF="#add_column_system%28%29"><CODE>add_column_system()</CODE></A></LI>
		<LI><A HREF="#add_button_create%28%29"><CODE>add_button_create()</CODE></A></LI>
		<LI><A HREF="#add_button_delete%28%29"><CODE>add_button_delete()</CODE></A></LI>
		<LI><A HREF="#add_cb%28%29"><CODE>add_cb()</CODE></A></LI>
		<LI><A HREF="#draw_list%28%29"><CODE>draw_list()</CODE></A></LI>
		<LI><A HREF="#restore_parameters%28%29"><CODE>restore_parameters()</CODE></A></LI>
	</UL>

	<LI><A HREF="#list%20attributes">List Attributes</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P>ePortal::HTML::List - List of objects support.</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<P>This module is used to make a list of objects. Example:</P>
<PRE>
 &lt;% $list-&gt;draw_list %&gt;</PRE>
<PRE>
 &lt;%method folder_name&gt;&lt;%perl&gt;
     my $list = $ARGS{list};
     my $obj = $list-&gt;{obj};
     . . .
 &lt;/%perl&gt;
 &lt;% HTML output %&gt;
 &lt;/%method&gt;</PRE>
<PRE>
 &lt;%method onStartRequest&gt;&lt;%perl&gt;
    my $obj = new ePortal::Notepad::View01;
    $list   = new ePortal::HTML::List( obj =&gt; $obj, class=&gt;&quot;smallfont&quot; );
    $list-&gt;add_column_image();
    $list-&gt;add_column( id =&gt; &quot;title&quot;, title =&gt; &quot;Column title&quot;,
            width =&gt; &quot;60%&quot;, url =&gt; &quot;url.htm?objid=#id#&quot;);
    $list-&gt;add_column_method( id =&gt; &quot;folder_name&quot;, title =&gt; &quot;Folder name&quot;);
    $list-&gt;add_column_system( delete =&gt; 1);</PRE>
<PRE>
    my $location = $list-&gt;handle_request;
    return $location if $location;</PRE>
<PRE>
    $obj-&gt;restore_where($list-&gt;restore_parameters);
 &lt;/%perl&gt;&lt;/%method&gt;</PRE>
<P>
<HR>
<H1><A NAME="methods">METHODS</A></H1>
<P>
<H2><A NAME="new%28%29"><CODE>new()</CODE></A></H2>
<P>Object contructor. Takes the same arguments as <A HREF="#initialize%28%29">initialize()</A></P>
<P>
<H2><A NAME="initialize%28%29"><CODE>initialize()</CODE></A></H2>
<P>Object initializer. See <A HREF="#list%20attributes">Attributes</A> for details.</P>
<P>
<H2><A NAME="handle_request%28%29"><CODE>handle_request()</CODE></A></H2>
<P>Handle request and do redirect if needed. Return new location.</P>
<P>
<H2><A NAME="columns%28%29"><CODE>columns()</CODE></A></H2>
<P>Returns array of ListColumn objects.</P>
<P>
<H2><A NAME="columns_count%28%29"><CODE>columns_count()</CODE></A></H2>
<P>Returns a number of columns</P>
<P>
<H2><A NAME="add_column%28%29"><CODE>add_column()</CODE></A></H2>
<P>Add new column to the List. Arguments are:</P>
<UL>
<LI><STRONG><A NAME="item_title">title</A></STRONG><BR>

Column title
<P></P>
<LI><STRONG><A NAME="item_class">class</A></STRONG><BR>

<A HREF="#item_class"><CODE>class</CODE></A> for the cell
<P></P>
<LI><STRONG><A NAME="item_align_valign">align valign</A></STRONG><BR>

Cell alignment
<P></P>
<LI><STRONG><A NAME="item_id">id</A></STRONG><BR>

ID of the column. Should be unique for the List. This is field name for
simple column.
<P></P>
<LI><STRONG><A NAME="item_nowrap">nowrap</A></STRONG><BR>

Add <A HREF="#item_nowrap"><CODE>nowrap</CODE></A> tag to the cell
<P></P>
<LI><STRONG><A NAME="item_url">url</A></STRONG><BR>

URL for the cell content. The string like #arg# is replaced with value of
attribute <CODE>arg</CODE> of the object
<P></P>
<LI><STRONG><A NAME="item_width">width</A></STRONG><BR>

Width of the cell
<P></P></UL>
<P>
<H2><A NAME="add_column_image%28%29"><CODE>add_column_image()</CODE></A></H2>
<P>Add a column with an image. See <A HREF="#add_column%28%29">add_column()</A> for arguments.
Additional arguments are:</P>
<UL>
<LI><STRONG><A NAME="item_src">src</A></STRONG><BR>

URL for the image
<P></P></UL>
<P>
<H2><A NAME="add_column_image%28%29"><CODE>add_column_image()</CODE></A></H2>
<P>Add a column. A method named <CODE>ID</CODE> will be called for cell content. See
<A HREF="#add_column%28%29">add_column()</A> for arguments.</P>
<P>
<H2><A NAME="add_column_enabled%28%29"><CODE>add_column_enabled()</CODE></A></H2>
<P>Add a column with ON|OFF state. Be default this column is linked to
<CODE>enabled</CODE> object attribute. See <A HREF="#add_column%28%29">add_column()</A> for
arguments.</P>
<P>
<H2><A NAME="add_column_image%28%29"><CODE>add_column_image()</CODE></A></H2>
<P>The same as add_column_enabled(). See <A HREF="#add_column%28%29">add_column()</A> for arguments.</P>
<P>
<H2><A NAME="add_column_system%28%29"><CODE>add_column_system()</CODE></A></H2>
<P>Add a system column. See <A HREF="#add_column%28%29">add_column()</A> for arguments.
Additional arguments are:</P>
<UL>
<LI><STRONG><A NAME="item_acl">acl</A></STRONG><BR>

Show ACL button
<P></P>
<LI><STRONG><A NAME="item_delete">delete</A></STRONG><BR>

Show DELETE button
<P></P>
<LI><STRONG><A NAME="item_edit">edit</A></STRONG><BR>

Show EDIT button
<P></P>
<LI><STRONG><A NAME="item_checkbox">checkbox</A></STRONG><BR>

Show SELECTED checkbox
<P></P>
<LI><STRONG><A NAME="item_export">export</A></STRONG><BR>

Show EXPORT button
<P></P></UL>
<P>
<H2><A NAME="add_button_create%28%29"><CODE>add_button_create()</CODE></A></H2>
<P>Add a button <STRONG>Create new</STRONG> in action bar.</P>
<UL>
<LI><STRONG><A NAME="item_value">value</A></STRONG><BR>

Button caption
<P></P></UL>
<P>
<H2><A NAME="add_button_delete%28%29"><CODE>add_button_delete()</CODE></A></H2>
<P>Add a button <STRONG>Delete</STRONG> in action bar.</P>
<UL>
<LI><STRONG>value</STRONG><BR>

Button caption
<P></P></UL>
<P>
<H2><A NAME="add_cb%28%29"><CODE>add_cb()</CODE></A></H2>
<P>Add combo-box to the list. See <A HREF="#add_column%28%29">add_column()</A> for arguments.
Additional parameters are</P>
<UL>
<LI><STRONG><A NAME="item_values_labels_default">values labels default</A></STRONG><BR>

Parameters for <CODE>CGI::popup_menu</CODE>
<P></P></UL>
<P>
<H2><A NAME="draw_list%28%29"><CODE>draw_list()</CODE></A></H2>
<P>Draw the list.</P>
<P>
<H2><A NAME="restore_parameters%28%29"><CODE>restore_parameters()</CODE></A></H2>
<P>List of parameters to pass to <CODE>restore_where()</CODE> function of ThePersistent
object.</P>
<P>
<HR>
<H1><A NAME="list%20attributes">List Attributes</A></H1>
<UL>
<LI><STRONG>class</STRONG><BR>

Default class for all table cells
<P></P>
<LI><STRONG><A NAME="item_form_action">form_action</A></STRONG><BR>

ACTION attribute for the form. Default is $ENV{SCRIPT_NAME}
<P></P>
<LI><STRONG><A NAME="item_form_method">form_method</A></STRONG><BR>

Default is GET
<P></P>
<LI><STRONG><A NAME="item_form_name">form_name</A></STRONG><BR>

Default is 'theForm'
<P></P>
<LI><STRONG><A NAME="item_more_data">more_data</A></STRONG><BR>

1 if there is more data after <A HREF="#draw_list%28%29">draw_list()</A>
<P></P>
<DT><STRONG><A NAME="item_pages">pages</A></STRONG><BR>
<DD>
Number of pages in the List. Undef if unknown
<P></P>
<LI><STRONG><A NAME="item_page">page</A></STRONG><BR>

Current page number
<P></P>
<LI><STRONG><A NAME="item_rowspan">rowspan</A></STRONG><BR>

Space in pixels between rows
<P></P>
<LI><STRONG><A NAME="item_rows_per_page">rows_per_page</A></STRONG><BR>

Rows to display per list page
<P></P>
<LI><STRONG><A NAME="item_obj">obj</A></STRONG><BR>

The <A HREF="ThePersistent.html">ThePersistent</A> object to iterate
<P></P>
<LI><STRONG><A NAME="item_rows_fetched">rows_fetched</A></STRONG><BR>

Rows fetched so far
<P></P>
<LI><STRONG><A NAME="item_after_row">after_row</A></STRONG><BR>

Method name to call after each row
<P></P>
<LI><STRONG><A NAME="item_before_row">before_row</A></STRONG><BR>

Method name to call before each row
<P></P>
<LI><STRONG><A NAME="item_total_columns">total_columns</A></STRONG><BR>

Number of columns in the table.
<P></P>
<LI><STRONG><A NAME="item_list_cb">list_cb</A></STRONG><BR>

combo-box default choice
<P></P>
<LI><STRONG><A NAME="item_edit_url">edit_url</A></STRONG><BR>

url for <CODE>icon_edit()</CODE>
<P></P></UL>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Sergey Rusakov, &lt;<A HREF="mailto:rusakov_sa@users.sourceforge.net">rusakov_sa@users.sourceforge.net</A>&gt;</P>

</BODY>

</HTML>
