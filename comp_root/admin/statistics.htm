%#============================================================================
%# ePortal - WEB Based daily organizer
%# Author - S.Rusakov <rusakov_sa@users.sourceforge.net>
%#
%# Copyright (c) 2001 Sergey Rusakov.  All rights reserved.
%# This program is free software; you can redistribute it
%# and/or modify it under the same terms as Perl itself.
%#
%# $Revision: 3.1 $
%# $Date: 2003/04/24 05:36:51 $
%# $Header: /home/cvsroot/ePortal/comp_root/admin/statistics.htm,v 3.1 2003/04/24 05:36:51 ras Exp $
%#
%#----------------------------------------------------------------------------
<%perl>
	my %STAT = (
	users_registered => "Registered users",
	users_active_today => "Active users today",
	users_active_now=> "Active users now (5 min)",
	sessions_count=> "Sessions total",
	sessions_active_today => "Sessions today",
	sessions_active_now=> "Sessions now (5 min)",
	pageview_count => "Personal home pages",
	notepad_users_count => "Notepad users",
	notepad_count => "Notepad memos total",
	contact_users_count => "Address users",
	contact_count => "Address items total",
	calendar_users_count => "Calendar users",
	calendar_count => "Calendar items total",
	todo_users_count => "ToDo users",
	todo_count => "ToDo items total",
	msgitem_count => "Messages as forums",
	msgitem_users_count => "Writing users",
	);
</%perl>


<table align="center" class="smallfont" border=1>
	<tr>
		<th>Parameter</th>
		<th>Value</th>
	</tr>

% foreach (sort keys %STAT) {
	<tr><td><A href="<% $ENV{SCRIPT_NAME} %>?verbose=<% $_ %>#verbose"><% $STAT{$_} %></a></td>
	<td align="center"><% scalar $ePortal->statistics($_) %></td></tr>
% }

</table>

% if ($ARGS{verbose}) {
  <a name="verbose">
	<b>Detailed statistics</b>
	<p>
% my @a = $ePortal->statistics($ARGS{verbose});
<% join('<br>', map {join ' - ', @$_} @a) %>
% }



%#=== @metags attr =========================================================
<%attr>
Title => "Statistics page"
</%attr>



%#=== @METAGS MenuItems ====================================================
<%method MenuItems><%perl>
	return [
		["Refresh" => $ENV{SCRIPT_NAME}],
		];
</%perl></%method>
