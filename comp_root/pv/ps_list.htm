%#============================================================================
%# ePortal - WEB Based daily organizer
%# Author - S.Rusakov <rusakov_sa@users.sourceforge.net>
%#
%# Copyright (c) 2001 Sergey Rusakov.  All rights reserved.
%# This program is free software; you can redistribute it
%# and/or modify it under the same terms as Perl itself.
%#
%# $Revision: 3.3 $
%# $Date: 2003/04/24 05:36:52 $
%# $Header: /home/cvsroot/ePortal/comp_root/pv/ps_list.htm,v 3.3 2003/04/24 05:36:52 ras Exp $
%#
%#----------------------------------------------------------------------------
%# Editor of list of vailable PageSections
%#----------------------------------------------------------------------------

<% $list->draw_list %>


%#=== @metags row_info ====================================================
<%method row_info><%perl>
	my $list = $ARGS{list};
	my $obj = $list->{obj};
</%perl>
	<span class="smallfont" style="color:#336699;">
		URL: <% $obj->url %>
	</span>

</%perl></%method>


%#=== @METAGS onStartRequest ====================================================
<%method onStartRequest><%perl>

	$list = new ePortal::HTML::List( obj => new ePortal::PageSection, after_row => "row_info" );
	$list->add_column_image();
	$list->add_column( id => "title",
			url => "ps_edit.htm?objid=#id#");
	$list->add_column( id => "component", class => "smallfont");
	$list->add_column( id => "params", class => "smallfont");
	$list->add_column( id => "width", align => "center");
  $list->add_column( id => "xacl_read", align => "center");
  $list->add_column_system( delete => 1);

	$list->add_button_create( url => "ps_edit.htm" );

  my $location = $list->handle_request;
  return $location if $location;

	$list->{obj}->restore_all();

</%perl></%method>


%#=== @METAGS attr =========================================================
<%attr>
Title => {rus => "Список секций для дом.страницы", eng => "Sections for home page"}
require_admin => 1
</%attr>


%#=== @metags once =========================================================
<%once>
my ($list, $obj, $search_object);
</%once>

%#=== @metags cleanup =========================================================
<%cleanup>
($list, $obj, $search_object) = ();
</%cleanup>
